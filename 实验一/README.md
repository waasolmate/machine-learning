## 实验一    《多源数据集成、清洗和统计》

#### 一、实验内容
##### 
广州大学某班有同学100人，现要从两个数据源汇总学生数据。第一个数据源在数据库中，第二个数据源在txt文件中，两个数据源课程存在缺失、冗余和不一致性，请用C/C++/Java程序实现对两个数据源的一致性合并以及每个学生样本的数值量化。

● 数据库表：ID (int),  姓名(string), 家乡(string:限定为Beijing / Guangzhou / Shenzhen / Shanghai), 性别（string:boy/girl）、身高（float:单位是cm)）、课程1成绩（float）、课程2成绩（float）、...、课程10成绩(float)、体能测试成绩（string：bad/general/good/excellent）；其中课程1-课程5为百分制，课程6-课程10为十分制。

● txt文件：ID(string：6位学号)，性别（string:male/female）、身高（string:单位是m)）、课程1成绩（string）、课程2成绩（string）、...、课程10成绩(string)、体能测试成绩（string：差/一般/良好/优秀）；其中课程1-课程5为百分制，课程6-课程10为十分制。

两个数据源合并后读入内存，并统计：

1. 学生中家乡在Beijing的所有课程的平均成绩。

2. 学生中家乡在广州，课程1在80分以上，且课程9在9分以上的男同学的数量。(备注：该处做了修正，课程10数据为空，更改为课程9)

3. 比较广州和上海两地女生的平均体能测试成绩，哪个地区的更强些？

4. 学习成绩和体能测试成绩，两者的相关性是多少？（九门课的成绩分别与体能成绩计算相关性）

<img src="https://raw.githubusercontent.com/waasoulmate/machine-learning/main/%E5%AE%9E%E9%AA%8C%E4%B8%80/%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C/%E9%97%AE%E9%A2%981%E3%80%812%E3%80%813%E3%80%814.png"/>

#### 二、实验环境:

##### 1、文件说明
**问题1_K-Means.cpp**文件为用C++实现对实验二z-score归一化后的样本数据进行降维和K-Means聚类，聚类后的数据存为实验结果文件夹中的一系列“k=n.csv”文件(n为类数)；

**问题1_可视化.py**文件为用python实现的对上一文件聚类后的数据绘制散点图，可视化结果存为实验结果文件夹中“问题1可视化截图”;

**问题2.py**文件为用python实现的对题目给出的样例数据进行K-Means聚类和散点图绘制；

**样本数据集文件夹**中包括用于问题1的z-score归一化数据、用于问题2的由题目给出的样例数据；

**实验结果文件夹**中包括，问题1、2的代码运行截图（包括聚类截图和可视化截图）、问题1聚类后的一系列k=n.csv文件(n为类数)。

##### 2、运行环境

**C++部分：**

#include <iostream> //输入输出流

#include <fstream> //文件输入输出流
  
#include <string> //处理字符串
  
#include <sstream> //字符串流，用于格式转换
  
#include <stdio.h>

#include <math.h> //用于数学运算

#include "Eigen/Dense" //矩阵库，用于处理矩阵运算

#include <vector> //容器，用于存放临时数据
  
#include <stdlib.h>

#include <random> //用于生成随机类中心
  
**python部分：**

import matplotlib.pyplot as plt //可视化模块

import pandas as pd //用于读取csv数据

import numpy as np //用于矩阵运算

import random //用于随机生成类中心

import copy //用于更新类中心时存储旧类中心

##### 3、函数说明

代码中已标明注释

#### 三、困难与总结:

#####
本次实验难点在于问题1的样本数据为实验二z-score归一化的十维数据，需要将其降为二维数据，通过查阅网上资料，确定用PCA降维的方法将数据降为二维，PCA方法是通过计算样本数据的协方差矩阵特征值和特征向量，选择最大的两个特征值对应的特征向量作为该矩阵的主成分，将主成分与样本数据矩阵相乘生成二维矩阵。运用了C++的第三方库函数Eigen中的pseudoEigenvalueMatrix函数和pseudoEigenvectors函数来计算样本数据矩阵的特征值。在降维和聚类的过程中需要存储多组不定长的临时数据，选择用C++中的容器vector来存放临时数据，而不用数组，原因在于为数组开辟空间需要指定数组长度且用完需要手动销毁空间，而vector可以开辟不定长空间且代码结束自动销毁空间，较为方便。

通过本次实验掌握了PCA降维和K-Means聚类算法，将冷冰冰且杂乱的数据进行处理，可以发现蕴含数据中的某些关联，在这个数据爆炸的时代尤为重要，某些规律和道理就藏在一堆堆杂乱无章的数据中，只要你愿意去发现。



