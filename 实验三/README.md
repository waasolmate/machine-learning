
## 实验三  《k-means聚类算法》
#### 一、实验内容：

##### 
用C++实现k-means聚类算法，

1. 对实验二中的z-score归一化的成绩数据进行测试，观察聚类为2类，3类，4类，5类的结果，观察得出什么结论？

答：聚类不是类个数越多越好，而是要根据需要选择合适的类个数，对于这份样本数据，聚为4类效果较好。

2. 由老师给出测试数据，进行测试，并画出可视化出散点图，类中心，类半径，并分析聚为几类合适。

样例数据(x,y)数据对：

3.45	7.08

1.76	7.24

4.29	9.55

3.35	6.65

3.17	6.41

3.68	5.99

2.11	4.08

2.58	7.10

3.45	7.88

6.17	5.40

4.20	6.46

5.87	3.87

5.47	2.21

5.97	3.62

6.24	3.06

6.89	2.41

5.38	2.32

5.13	2.73

7.26	4.19

6.32	3.62

找到聚类中心后，判断(2,6)是属于哪一类？

答：对于这份样例数据，最好是聚为2类，由于样本不多，聚为3类或者更多，易出现类中心溢出，且从可视化散点图可发现样本数据分布明显呈两类。由散点图可知（2，6）属于图中偏左一类。

#### 二、实验环境:

##### 1、文件说明
**问题1_K-Means.cpp**文件为用C++实现对实验二z-score归一化后的样本数据进行降维和K-Means聚类，聚类后的数据存为实验结果文件夹中的一系列“k=n.csv”文件(n为类数)；

**问题1_可视化.py**文件为用python实现的对上一文件聚类后的数据绘制散点图，可视化结果存为实验结果文件夹中“问题1可视化截图”;

**问题2.py**文件为用python实现的对题目给出的样例数据进行K-Means聚类和散点图绘制；

**样本数据集文件夹**中包括用于问题1的z-score归一化数据、用于问题2的由题目给出的样例数据；

**实验结果文件夹**中包括，问题1、2的代码运行截图（包括聚类截图和可视化截图）、问题1聚类后的一系列k=n.csv文件(n为类数)。

##### 2、运行环境

**C++部分：

#include <iostream> //输入输出流

#include <fstream> //文件输入输出流
  
#include <string> //处理字符串
  
#include <sstream> //字符串流，用于格式转换
  
#include <stdio.h>

#include <math.h> //用于数学运算

#include "Eigen/Dense" //矩阵库，用于处理矩阵运算

#include <vector> //容器，用于存放临时数据
  
#include <stdlib.h>

#include <random> //用于生成随机类中心
  
**python部分：

import matplotlib.pyplot as plt //可视化模块

import pandas as pd //用于读取csv数据

import numpy as np //用于矩阵运算

import random //用于随机生成类中心

import copy //用于更新类中心时存储旧类中心

##### 3、函数说明

代码中已标明注释

#### 三、困难与总结:

#####
本次实验难点在于问题1的样本数据为实验二z-score归一化的十维数据，需要将其降为二维数据，通过查阅网上资料，确定用PCA降维的方法将数据降为二维，PCA方法是通过计算样本数据的协方差矩阵特征值和特征向量，选择最大的两个特征值对应的特征向量作为该矩阵的主成分，将主成分与样本数据矩阵相乘生成二维矩阵。运用了C++的第三方库函数Eigen中的pseudoEigenvalueMatrix函数和pseudoEigenvectors函数来计算样本数据矩阵的特征值。在降维和聚类的过程中需要存储多组不定长的临时数据，选择用C++中的容器vector来存放临时数据，而不用数组，原因在于为数组开辟空间需要指定数组长度且用完需要手动销毁空间，而vector可以开辟不定长空间且代码结束自动销毁空间，较为方便。

通过本次实验掌握了PCA降维和K-Means聚类算法，将冷冰冰且杂乱的数据进行处理，可以发现蕴含数据中的某些关联，在这个数据爆炸的时代尤为重要，某些规律和道理就藏在一堆堆杂乱无章的数据中，只要你愿意去发现。
